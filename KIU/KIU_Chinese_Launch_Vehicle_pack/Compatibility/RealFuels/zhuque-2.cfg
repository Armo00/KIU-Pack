// Modified 2023-09-27

// Zhuque-2 Specification
// Gross mass: 214t 
// Payload to LEO: 4t
// First Stage TQ-12A burn time(estimation): 143.5s
// First Stage Propellant mass(estimation): 145t
// TQ-11 burn time(estimation): 587.4s
// TQ-12-vac burn time(estimation): 142.1s
// Second Stage Propellant mass(estimation): 50.5t

// TQ-12 Engine
// Gas Generator Engine
// Base: Methalox  ISP:286-324 Thrust:596-782.25  mass:0.8    TWR:99.71
// 100%: 745KN 105%: 782.25KN


// Zhuque-2 First Stage
// Gross mass: 160t    Dry mass: 15t      Fuel mass: 145t   Burn Time: 147s
// 4*TQ-12(3.2t) + 4*Tail(0.4t) + Interstage(0.2t) + Fueltank(11.2t)

@PART[KCLV_ZQ2_Stage_1]:NEEDS[RealFuels]:FINAL
{
    @mass = 11.2
    !RESOURCE,*{}
    !MODULE[ModuleFuelTanks] {}
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 171560
        basemass = -1
        TANK
        {
            name = LqdMethane
            amount = Full
            maxAmount = 41.37%
        }
        TANK
        {
            name = LqdOxygen
            amount = Full
            maxAmount = 58.63%
        }
    }

    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
        @minThrust = 120
        @maxThrust = 120
        !PROPELLANT[*],* {}
        PROPELLANT
        {
            name = PBAN
            ratio = 1
        }
        !atmosphereCurve {}
        atmosphereCurve
        {
            key = 0 250
            key = 1 200
        }
    }
    RESOURCE
    {
        name = PBAN
        amount = 120
        maxAmount = 120
    }
}

@PART[KCLV_ZQ2_interstage_1-2]::NEEDS[RealFuels]:FINAL
{
    @mass = 0.2
}

@PART[KCLV_ZQ_2_Wing]::NEEDS[RealFuels]:FINAL
{
    @mass = 0.1
}

// Zhuque-2 Second Stage
// Gross mass: 54.5t    Dry mass: 3.5t      Fuel mass: 50.5t   Burn Time: 587.4s
// TQ-12-Vac(0.96t) + 4*TQ-11(0.4t) + Payload Adaptor(0.14t) + Fueltank(2.0t)

@PART[KCLV_ZQ2_Stage_2]:NEEDS[RealFuels]:FINAL
{
    @mass = 2.0
    !RESOURCE,*{}
    !MODULE[ModuleFuelTanks] {}
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 59800
        basemass = -1
        TANK
        {
            name = LqdMethane
            amount = Full
            maxAmount = 41.37%
        }
        TANK
        {
            name = LqdOxygen
            amount = Full
            maxAmount = 58.63%
        }
    }
}

// TQ-12
@PART[KCLV_TQ12]:NEEDS[RealFuels]:FINAL
{
    @mass = 0.8
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
    }

    !MODULE[ModuleEngineConfigs],*{}
    !MODULE[ModuleAlternator],*{}
    !RESOURCE,*{}

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = TQ-12-Vac
        origMass = 0.8
        modded = false
        CONFIG
        {
            name = TQ-12-Vac
            description = The TQ-12 is a gas-generator cycle rocket engine burning liquid methane and liquid oxygen developed by Landspace. It is rated for 80%~105% of thrust. This is the Vaccum version of TQ-12.
            minThrust = 627.2
            maxThrust = 823.2
            heatProduction = 100
            massMult = 1.2
            %ullage = True
            %pressureFed = False
            %ignitions = 10	
            cost = 200
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 350
                key = 1 286
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 1.0
            }
        }

        CONFIG
        {
            name = TQ-12
            description = The TQ-12 is a gas-generator cycle rocket engine burning liquid methane and liquid oxygen developed by Landspace. It is rated for 80%~105% of thrust.
            minThrust = 596
            maxThrust = 782.25
            heatProduction = 100
            massMult = 1.00
            %ullage = True
            %pressureFed = False
            %ignitions = 10	
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 324
                key = 1 286
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 1.0
            }
        }

        CONFIG
        {
            name = TQ-12A
            description = An improved version of TQ-12. It has an ISP improvement of 4s, a thrust boost by about 9% while also being 100kg lighter. It is rated for 50%~110% of thrust. Be aware that the current max thrust is at 110%.
            // Assuming 745KN for TQ-12 100%, then TQ-12A 100%: 812.05KN, TQ-12A 110%: 893.255KN
            // Source: http://finance.people.com.cn/n1/2022/0825/c1004-32511655.html
            minThrust = 406.025
            maxThrust = 893.255
            heatProduction = 100
            massMult = 0.875
            %ullage = True
            %pressureFed = False
            %ignitions = 10	
            cost = 100
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 328
                key = 1 290
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 0.5
            }
        }
        CONFIG
        {
            name = KQ-12
            description = KQ-12 is an imaginary variant of the Chinese liquid rocket engine TQ-12. It has an improved ISP with multi-start capability. You should consider this as a Cheat.
            minThrust = 375
            maxThrust = 920
            heatProduction = 100
            massMult = 0.8
            %ullage = True
            %pressureFed = False
            %ignitions = 20	
            cost = 300
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 340
                key = 1 300
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 0.1
            }
        }
    }
    RESOURCE
    {
        name = TEATEB
        amount = 1.0
        maxAmount = 1.0
    }

}


// TQ-13: 4*TQ12
@PART[KCLV_TQ13_With_Shell]:NEEDS[RealFuels]:FINAL
{
    @mass = 3.2
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
    }

    !MODULE[ModuleEngineConfigs],*{}
    !MODULE[ModuleAlternator],*{}
    !RESOURCE,*{}

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = TQ-12A*4
        origMass = 3.2
        modded = false
        CONFIG
        {
            name = TQ-12*4
            description = The TQ-12 is a gas-generator cycle rocket engine burning liquid methane and liquid oxygen developed by Landspace. It is rated for 80%~105% of thrust. 4 TQ-12 form the TQ-13. Be aware, this is 105% thrust and for 100% thrust you need to tune it down to about 95%. 
            minThrust = 2384
            maxThrust = 3129
            heatProduction = 100
            massMult = 1.00
            %ullage = True
            %pressureFed = False
            %ignitions = 10	
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 324
                key = 1 286
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 1.0
            }
        }
        CONFIG
        {
            name = TQ-12A*4
            description = An improved version of TQ-12. It has an ISP improvement of 4s, a thrust boost by about 9% while also being 100kg lighter. It is rated for 50%~110% of thrust. 4 TQ-12A form the TQ-13A. Be aware, this is 110% thrust and for 100% thrust you need to tune it down to about 91%. 
            // Assuming 745KN for TQ-12 100%, then TQ-12A 100%: 812.05KN, TQ-12A 110%: 893.255KN
            // Source: http://finance.people.com.cn/n1/2022/0825/c1004-32511655.html
            minThrust = 1624.1
            maxThrust = 3573.02
            heatProduction = 100
            massMult = 0.875
            %ullage = True
            %pressureFed = False
            %ignitions = 10	
            cost = 400
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 328
                key = 1 290
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 0.5
            }
        }
        CONFIG
        {
            name = KQ-12*4
            description = KQ-12 is an imaginary variant of the Chinese liquid rocket engine TQ-12. It has an improved ISP with multi-start capability. You should consider this as a Cheat.
            minThrust = 1500
            maxThrust = 3680
            heatProduction = 100
            massMult = 0.8
            %ullage = True
            %pressureFed = False
            %ignitions = 20	
            cost = 1200
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 340
                key = 1 300
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 0.1
            }
        }
    }
    RESOURCE
    {
        name = TEATEB
        amount = 1.0
        maxAmount = 1.0
    }

}

// TQ-11
@PART[KCLV_TQ-11]:Final
{
    @mass = 0.1
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
    }

    !MODULE[ModuleEngineConfigs],*{}
    !MODULE[ModuleAlternator],*{}
    !RESOURCE,*{}

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = TQ-11
        origMass = 0.1
        modded = false
        CONFIG
        {
            name = TQ-11
            description = The TQ-11 is the vernier engine on board Zhuque-2.
            minThrust = 20
            maxThrust = 20
            heatProduction = 100
            massMult = 1.00
            %ullage = True
            %pressureFed = False
            %ignitions = 10	
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 333
                key = 1 200
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 0.02
            }
        }
        CONFIG
        {
            name = KQ-11
            description = KQ-11 is an imaginary variant of the Chinese liquid rocket engine TQ-11. It has an improved ISP with multi-start capability. You should consider this as a Cheat.
            minThrust = 5
            maxThrust = 22
            heatProduction = 100
            massMult = 0.65
            %ullage = True
            %pressureFed = False
            %ignitions = 20	
            cost = 50
            PROPELLANT
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 355
                key = 1 200
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
            IGNITOR_RESOURCE
            {
                name = TEATEB
                amount = 0.01
            }
        }
    }
    RESOURCE
    {
        name = TEATEB
        amount = 0.1
        maxAmount = 0.1
    }

}

