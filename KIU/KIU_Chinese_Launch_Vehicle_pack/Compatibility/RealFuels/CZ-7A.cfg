// Modified 2022-12-2

// CZ-7A Third Stage
// Gross mass: 95t    Dry mass: 2.74t      Fuel mass: 20t
// YF-75*2(0.55*2t) + 
// Burn Time: ~ 470s

@PART[KCLV_CZ3_STAGE3]:NEEDS[RealFuels]:FINAL
{
    @maxTemp = 2000
    !RESOURCE,*{}
    !MODULE[ModuleFuelTanks] {}
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 55725
        basemass = -1
        TANK
        {
            name = LqdHydrogen
            amount = Full
            maxAmount = 42067.575
        }
        TANK
        {
            name = LqdOxygen
            amount = Full
            maxAmount = 13357.425
        }
        TANK
        {
            name = Hydrazine
            amount = Full
            maxAmount = 300
        }
    }
    @MODULE[ModuleRCSFX]
    {
        @resourceName = Hydrazine
        @thrusterPower = 0.8
        !atmosphereCurve{}
        atmosphereCurve
        {
            key = 0 290
            key = 1 180
            key = 4 0.001
        }
    }
}

@PART[KCLV_YF75]:NEEDS[RealFuels]:FINAL
{
    %mass = 0.32
    @maxTemp = 2200

    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
    }

    !MODULE[ModuleEngineConfigs],*{}
    !MODULE[ModuleAlternator],*{}
    !RESOURCE,*{}
    @MODULE[ModuleGimbal]
    {
        %gimbalRange = 4
        %useGimbalResponseSpeed = true
        %gimbalResponseSpeed = 16
    }

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = YF-75
        origMass = -1
        modded = false
        CONFIG
        {
            name = YF-75
            description = The YF-75 is a liquid cryogenic rocket engine burning liquid hydrogen and liquid oxygen in a gas generator cycle.
            minThrust = 78
            maxThrust = 78.45
            heatProduction = 100
            massMult = 1.00
            %ullage = True
            %pressureFed = False
            %ignitions = 1	
            PROPELLANT
            {
                name = LqdHydrogen
                ratio = 0.759
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.241
            }
            atmosphereCurve
            {
                key = 0 439
                key = 1 200.0
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
        }
        CONFIG
        {
            name = YF-75K
            description = The YF-75K is an imaginary YF-75 variant with improved ISP, throttle capability and multi-start capability. You should consider this as a Cheat.
            minThrust = 50
            maxThrust = 85
            heatProduction = 100
            massMult = 1.00
            %ullage = True
            %pressureFed = False
            %ignitions = 5	
            PROPELLANT
            {
                name = LqdHydrogen
                ratio = 0.759
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.241
            }
            atmosphereCurve
            {
                key = 0 442
                key = 1 200.0
            }
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 1.0
            }
        }
    }
}

@PART[KCLV_CZ7A_Stage_1]:NEEDS[RealFuels]:FINAL
{
    @mass = 16.2
    !RESOURCE,*{}
    !MODULE[ModuleFuelTanks] {}
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 146870
        basemass = -1
        TANK
        {
            name = Kerosene
            amount = Full
            maxAmount = 34.87%
        }
        TANK
        {
            name = LqdOxygen
            amount = Full
            maxAmount = 65.13%
        }
    }

    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
        @minThrust = 120
        @maxThrust = 120
        !PROPELLANT[*],* {}
        PROPELLANT
        {
            name = PBAN
            ratio = 1
        }
        !atmosphereCurve {}
        atmosphereCurve
        {
            key = 0 250
            key = 1 200
        }
    }
    RESOURCE
    {
        name = PBAN
        amount = 120
        maxAmount = 120
    }
}